
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Extrapolation of 2009 PUF &#8212; taxdata</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Stage III Documentation" href="puf_stage3.html" />
    <link rel="prev" title="Extrapolation Methods" href="Stage1_Stage2_Methodology.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">taxdata</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../index.html">
                    About taxdata
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contributing to taxdata
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../contributing/CONTRIBUTING.html">
   TaxData Contributor Guide
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  taxdata Data
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../data/datasets.html">
   TaxData Dataset Documentation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data/about_puf_data.html">
   About IRS Public Use Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data/puf_file_doc.html">
   Current Population Survey Tax Unit File Documentation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data/about_cps_data.html">
   About CPS Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data/cps_file_doc.html">
   Current Population Survey Tax Unit File Documentation
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  taxdata Methodology
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="CBO_Baseline_Updating_Instructions.html">
   Updating the CBO Baseline
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="SOI_Estimates_Updating_Instructions.html">
   Updating the SOI Estimates
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="MATCH.html">
   CPS Match File documentation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="MatchingDocumentationRevised.html">
   Overview of Statistical Matching
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Stage1_Stage2_Methodology.html">
   Extrapolation Methods
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Extrapolation of 2009 PUF
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="puf_stage3.html">
   Stage III Documentation
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  About
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../about/roadmap.html">
   Roadmap
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/LICENSE.html">
   CC0 1.0 Universal Summary
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/PSLmodels/taxdata"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/PSLmodels/taxdata/issues/new?title=Issue%20on%20page%20%2Fcontent/methods/Stage1_Stage2_2009PUF.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../_sources/content/methods/Stage1_Stage2_2009PUF.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Extrapolation of 2009 PUF
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#overview">
     Overview
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#stage-1">
     Stage 1
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#stage-2">
     Stage 2
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#appendix-a-stage-i-factors">
   Appendix A Stage I factors
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#appendix-b-puf-variables-and-blow-up-factors">
   Appendix B PUF variables and blow-up factors
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#appendix-c-stage-ii-targets">
   Appendix C Stage II targets
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Extrapolation of 2009 PUF</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Extrapolation of 2009 PUF
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#overview">
     Overview
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#stage-1">
     Stage 1
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#stage-2">
     Stage 2
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#appendix-a-stage-i-factors">
   Appendix A Stage I factors
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#appendix-b-puf-variables-and-blow-up-factors">
   Appendix B PUF variables and blow-up factors
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#appendix-c-stage-ii-targets">
   Appendix C Stage II targets
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="extrapolation-of-2009-puf">
<h1>Extrapolation of 2009 PUF<a class="headerlink" href="#extrapolation-of-2009-puf" title="Permalink to this headline">#</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">#</a></h2>
<p>OSPC’s current micro simulation model is using CPS-matched data file based on 2009 Public Use File (PUF) to generate tax revenue projections on a 10-year budget window. In order to do the calculations in the projection time period (2015-2024), the model needs to extrapolate the variables in PUF to the future years. OSPC follows a two-stage procedure, originally developed by John O’Hare, to extrapolate the PUF variables. The first stage is to ‘blow-up’ those variables directly using external macro-economic baseline projections, mainly to reflect inflation. Then the second step is to maintain proper distribution of wage and salaries, as well as key macro targets.</p>
<p>The CPS-matched file is a statistically matched file base on 09 PUF. It not only includes filers information from PUF, but also non-filers from Current Population Survey (CPS). The Public Use File of 2009, currently base of the statistical match, is a stratified sample from the IRS full file with all taxpayers’ information. In PUF, there are in total 152,526 records. One records was removed before futhur procedures, due to the fact that this record, with Record ID (RECID = 999999) contains aggregated information that would potential distort later steps. All the information in this aggregated record was re- distributed to all other records using a Stage I and Stage II extrapolation routine described below. All the remaining record has a weight variable indicating approximately how many taxpayers this record represents in the full file. In addition to the weight information, each record has 201 variables, roughly 169 of which are used in the OSPC tax calculator. The aggregate values (weighted sum) of each variable are very close to the statistics for all taxpayers provided by IRS.</p>
</section>
<section id="stage-1">
<h2>Stage 1<a class="headerlink" href="#stage-1" title="Permalink to this headline">#</a></h2>
<p>In Stage I, the model blows up PUF variables using per capita adjustment factors. This step will make sure the aggregated values of these variables match certain macroeconomic projections in terms of growth rates. Currently, the external baseline projection used in Stage I is mainly from the CBO economic outlook. In near future, the calculations from OSPC’s dynamic model, LOGUS, will replace these external projections.</p>
<p>The per capita adjustment factors applied to each record in PUF are calculated based on both macroeconomic targets growth rates and population growth rates. Both of these rates are simple- compounded rates, derived from multiple data resources, including CBO, IRS and Census Bureau. For example, the projected GDP in year t is projected at Xt, then the OSPC model calculates growth rate r as:</p>
<div class="math notranslate nohighlight">
\[
r = \frac{X_t}{X_0} − 1
\]</div>
<p>Similarly, population P growth rate p is calculated as:</p>
<div class="math notranslate nohighlight">
\[
p = \frac{P_t}{P_0} − 1
\]</div>
<p>To make sure the extrapolated variables indeed aggregate at <span class="math notranslate nohighlight">\(X_{t}\)</span>, the model calculates the ratio of the two rates as per capital adjustment factor and then uses this value to blow up the target variable for each record in the base year <span class="math notranslate nohighlight">\(x_{i0}\)</span>.</p>
<p>Per capita adjustment for each individual record:</p>
<div class="math notranslate nohighlight">
\[
1 + \varrho = \frac{1 + r}{1 + p}
\]</div>
<p>After blow-up, the target variable value for each record and the weight variable would be:</p>
<div class="math notranslate nohighlight">
\[
x_{it} = (1 + \varrho)x_{i0}
\]</div>
<div class="math notranslate nohighlight">
\[
w_{it} = (1 + p)w_{i0}
\]</div>
<p>Here <span class="math notranslate nohighlight">\(x_{it}\)</span> represents the extrapolated value of targets for one return i at year t, and <span class="math notranslate nohighlight">\(w_{it}\)</span> represents the
stage-I extrapolated value of weight for each return i.</p>
<p>This method of blow-up ensures that the aggregates of future individual variables would be in line with the macro projections based on IRS taxpayer information and CBO baseline. As you can see as follows:</p>
<p>Starting with the weighted sum of a target variable x at year t</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align}
&amp;\sum_{i} x_{it}w_{it} \\
&amp; = \sum_{i} (1+ \varrho)x_{i0}(1+p)w_{i0} \\
&amp; = \sum_{i} \frac{1+r}{1+p}x_{i0}(1+p)w_{i0} \\
&amp; = (1 + r)\sum_{i} x_{i0}w_{i0} \\
&amp; = (1+r)X_0 \\
&amp; = X_t
\end{align}
\end{split}\]</div>
<p>Currently in Stage I, OSPC’s model has 20 factors, 16 macro factors and 4 population related factors. For macroeconomic economic targets like GDP that do not have corresponding variables in the PUF, they are derived directly from CBO baseline projections. While the other factors, taxable interests for example, are calculated from both CBO projection and IRS statistics. Specifically, the model takes the most recent (currently 2012) statistics of this variable released by IRS as the base of macroeconomic targets projection. Then the model ‘ages’ those statistics with the yearly growth rates of CBO targets to extrapolate those statistics on the budget window. Some of the values extrapolated here are used as target in Stage II as well. More details will be provided later in this description. With these extrapolated values, the model then using the 2008 data as base, calculates simple growth rates of these extrapolated values for each projection year. Please see appendix A for a complete list of all factors.</p>
<p>As you can see, there are roughly 169 variables that need to be blown up in PUF but only 20 factors and less than 16 per-capita adjustments are available. At the moment for simplicity reasons, many variables are sharing one factor. Most variables are aged at personal income growth rate. Variables that don’t follow the trajectory of personal income are applied a factor that fits the best. For example, home mortgage interest deduction is currently using taxable interest income factor for adjustment. The complete table for the correspondence between stage I factors and PUF variables can be found in Appendix B.</p>
</section>
<section id="stage-2">
<h2>Stage 2<a class="headerlink" href="#stage-2" title="Permalink to this headline">#</a></h2>
<p>At the end of Stage I, the OSPC model blows up the base year data through the projection years. Even though all targets set up in Stage I can be hit at this point, some other variables, mainly the ones not included in the targets, might behave oddly if we only target the aggregate values. For example, we targeted total wage in Stage I and this would kick Earned Income Credit (EIC) out of place in future years. But the Stage I simple-compounded rate blow-up process cannot get both total wage and EIC fell in reasonable ranges at the same time, as those two variables impose closely related but different requirements on wage and population distribution. John found that if wage distribution were maintained same over years, this problem would be fixed automatically.</p>
<p>In Stage II, the OSPC model applies a linear programming (LP) algorithm on the post-Stage-I records to adjust the weights. In this way, all the targeted variables would sum up to the targets, and other non-target variables stay in reasonable ranges. The stage II targets not only include those stage I targets calculated based on both CBO baseline growth rates and IRS statistics, but also certain targets on population and return groups, and wage distribution. For the wage distribution, the model currently assumes the distribution of wage stays the same over the projection time period. This assumption is subject to change as many other resources, including JCT’s present model, suggest that the growth rate of higher income class is greater than lower income class. A complete list of Stage II targets is attached as Appendix C.</p>
<p>In this LP model, the object function is based on the absolute value of percentage adjustment on weights. Assume $z_{it} is the percentage adjustment on weights w for record i between any projection year t and post-stage-I base year weight. One twist on top of the original Stage I blow up here is that we applied different factor to different age groups for the weight variable. From the population growth rates by age in the past few years, the 65+ group grows at a higher rate than the overall population. (citation needed!!!) As PUF doesn’t contain any age information, we use social security benefits, represented by variable e02400 in PUF, to approximate the age characteristic of PUF. Specifically, if one filer received social security benefits in 2008, we assume he or she is older than 65 and blow up the weight of this return using the senior population growth rate (APOPSNR). Otherwise, the weight is blown up at the total return growth rate (ARETS). In this way, the weight variable at year t is:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
w_{it} =
    \begin{cases}
      w_{i0}*ARETS if e02400 \leq 0\\
       wi, 0*APOPSNR if e02400 &gt; 0
    \end{cases}
\end{split}\]</div>
<p>Then the percentage adjustment on weights can be expressed as:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
z_{it} =
    \begin{cases}
      \frac{w_{it}^*}{w_{i0}*ARETS} − 1 if e02400 ≤ 0\\
       \frac{w_{it}^*}{w_{i0}*APOPSNR} − 1 if e02400 &gt; 0
    \end{cases}
\end{split}\]</div>
<p>Here <span class="math notranslate nohighlight">\(w_{it}^*\)</span> is the final optimized weight after stage II, which is unknown at this point.</p>
<p>In this problem, we want to minimize the overall adjustments on all records, in other words, to minimize the sum of the absolute values of all the percentage changes on weights. Thus, this LP problem aims at minimizing the following function:</p>
<div class="math notranslate nohighlight">
\[
\sum_i |z_{it}|
\]</div>
<p>To enhance efficiency of the optimization, we decompose the percentage adjustment <span class="math notranslate nohighlight">\(z_{it}\)</span> into two
components: r and s. These two components respectively carry the absolute values of positive and negative elements of original adjustments <span class="math notranslate nohighlight">\(z_{it}\)</span>. Mathematically, they can be expressed as following:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
r_{it} =
    \begin{cases}
      z_{it},  z_{it} &gt; 0 \\
      0,  else
    \end{cases}
\end{split}\]</div>
<div class="math notranslate nohighlight">
\[\begin{split}
s_{it} =
    \begin{cases}
      z_{it},  z_{it} &gt; 0 \\
      0,  else
    \end{cases}
\end{split}\]</div>
<p>Then it’s not hard to see that the original adjustment is the difference of the two components, and its absolute value is the sum of the two components.</p>
<div class="math notranslate nohighlight">
\[
z_{it} = r_{it} – s_{it}
\]</div>
<div class="math notranslate nohighlight">
\[
|z_{it}| = r_{it} + s_{it}
\]</div>
<p>Therefore, the object function turns into:</p>
<div class="math notranslate nohighlight">
\[
\sum_{i} (r_{it} + s_{it})
\]</div>
<p>As this LP problem takes post-stage-I data as input and borrows a large number of targets derived in Stage I, the percentage adjustments should be fairly small. In addition, if the adjustment runs too large, there’s a big chance that the non-target variables get pulled away from their normal ranges. Thus in the LP model, the tolerance of each <span class="math notranslate nohighlight">\(z_{it} = r_{it} – s_{it}\)</span> is also incorporate as a constraint:</p>
<div class="math notranslate nohighlight">
\[
r_{it} + s_{it} &lt; \delta
\]</div>
<p>For each year, the OSPC model try to find the lowest tolerance that still allows the LP solver generates feasible solutions. This tolerance is different from year to year. Generally speaking, years earlier in the projection period have lower tolerances than years further out in the future. Currently the tolerances for all the years are under 0.45.</p>
<p>In addition to this tolerance constraint, all other constraints of this LP problem can be grouped into three categories:</p>
<ul class="simple">
<li><p>Return targets</p></li>
<li><p>Aggregate targets</p></li>
<li><p>Aggregate by Income class targets</p></li>
</ul>
<p>The first category of return targets is mainly focused on different filing status of returns, and population of different age groups. Total numbers of returns with different filing status are maintained in the same ratio to total returns through years, and each category grows at the overall return growth rate. Senior filers are extrapolated at the rate for population with age greater than 65, projected by Census. Mathematically, these constraints are</p>
<div class="math notranslate nohighlight">
\[
\sum_i w_{it}(1 + r_{it} - s_{it}) = W_t
\]</div>
<p>where <span class="math notranslate nohighlight">\(w_{it}\)</span> refers to the twisted post-stage-I weights created for Stage II, and Wt refers to the Stage II
return targets.</p>
<p>The second category contains macroeconomic targets other than total wages. These constraints are set up as following:</p>
<div class="math notranslate nohighlight">
\[
\sum_i x_{it} w_{it}(1 + r_{it} - s_{it}) = X_t
\]</div>
<p>Both target variable for record i, <span class="math notranslate nohighlight">\(x_{it}\)</span>, and weight variable <span class="math notranslate nohighlight">\(w_{it}\)</span> are the post-stage-I results.</p>
<p>The third category of aggregate by income class includes 12 targets. These targets are the weighted sum of wages and salaries ranked and grouped by adjusted gross income (AGI) classes. Currently, the distribution of wages and salaries is maintained the same as the base year through the entire projection period.</p>
<p>After setting up the object function and all the constraint, the OSPC model runs the CLP solver to find solutions for this LP problem. To finish the Stage II adjustment, the model applies the solution from CLP solver, <span class="math notranslate nohighlight">\(r_{it} − s_{it}\)</span>, to the post-stage-I weights and gets the final adjusted weights.</p>
<p>To sum up, the OSPC tax calculator applies the Stage I factors to blow up most of the PUF variables and uses the adjusted weights generated in Stage II for all projection years. This description outlines the current extrapolation routine, which is subject to change in near future for various reasons. Many factors would change the routine significantly, which includes a new version of PUF released by IRS. This description will be updated accordingly.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="appendix-a-stage-i-factors">
<h1>Appendix A Stage I factors<a class="headerlink" href="#appendix-a-stage-i-factors" title="Permalink to this headline">#</a></h1>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Var_name</p></th>
<th class="head"><p>Long name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>GDPNA</p></td>
<td><p>GDP</p></td>
</tr>
<tr class="row-odd"><td><p>AWAGE</p></td>
<td><p>Wages and Salaries</p></td>
</tr>
<tr class="row-even"><td><p>AINTS</p></td>
<td><p>Interest</p></td>
</tr>
<tr class="row-odd"><td><p>ADIVS</p></td>
<td><p>Dividends</p></td>
</tr>
<tr class="row-even"><td><p>ATXPY</p></td>
<td><p>Personal Income</p></td>
</tr>
<tr class="row-odd"><td><p>ASCHCI</p></td>
<td><p>Business Income</p></td>
</tr>
<tr class="row-even"><td><p>ASCHCL</p></td>
<td><p>Business Loss</p></td>
</tr>
<tr class="row-odd"><td><p>ACGNS</p></td>
<td><p>Capital Gain</p></td>
</tr>
<tr class="row-even"><td><p>ASCHF</p></td>
<td><p>Schedule F Income</p></td>
</tr>
<tr class="row-odd"><td><p>ASCHEI</p></td>
<td><p>Schedule E Income</p></td>
</tr>
<tr class="row-even"><td><p>ASCHEL</p></td>
<td><p>Schedule E Loss</p></td>
</tr>
<tr class="row-odd"><td><p>AUNCOMP</p></td>
<td><p>Unemployed Compensation</p></td>
</tr>
<tr class="row-even"><td><p>ASOCSEC</p></td>
<td><p>Social Security</p></td>
</tr>
<tr class="row-odd"><td><p>ACPIM</p></td>
<td><p>Medical CPI</p></td>
</tr>
<tr class="row-even"><td><p>ABOOK</p></td>
<td><p>Book Income</p></td>
</tr>
<tr class="row-odd"><td><p>AIPD</p></td>
<td><p>Interest Paid</p></td>
</tr>
</tbody>
</table>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="appendix-b-puf-variables-and-blow-up-factors">
<h1>Appendix B PUF variables and blow-up factors<a class="headerlink" href="#appendix-b-puf-variables-and-blow-up-factors" title="Permalink to this headline">#</a></h1>
<p>For each e-variable below, please refer to <a class="reference external" href="https://docs.google.com/spreadsheets/d/1WlgbgEAMwhjMI8s9eG117bBEKFioXUY0aUTfKwHwXdA/edit#gid=1029315862">the spreadsheet</a> for complete definition.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Factors</strong></p></th>
<th class="head"><p><strong>PUF variables</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>AGDPN</p></td>
<td><p>e03240</p></td>
</tr>
<tr class="row-odd"><td><p>AWAGE</p></td>
<td><p>e00200</p></td>
</tr>
<tr class="row-even"><td><p>AINTS</p></td>
<td><p>e00300</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e00400</p></td>
</tr>
<tr class="row-even"><td><p>ADIVS</p></td>
<td><p>e00600</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e00650</p></td>
</tr>
<tr class="row-even"><td><p>ATXPY</p></td>
<td><p>e00700</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e00800</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e01400</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e01500</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e01700</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e03150</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e03210</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e03220</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e03230</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e03300</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e03400</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e03500</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e07230</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e07240</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e07260</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e07300</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>p08000</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e09700</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e09800</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e09900</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e10700</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e10900</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e59560</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e59680</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e59700</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e59720</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e11550</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e11070</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e11100</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e11200</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e11300</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e11400</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e11570</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e11580</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e11581</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e11582</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e11583</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e10605</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e18400</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e18500</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e19550</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e19800</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e20100</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e19700</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e20550</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e20600</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e20400</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e20800</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e20500</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e21040</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e32800</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e33000</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e53240</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e53280</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e53410</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e53300</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e53317</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e53458</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e58950</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e58990</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>p60100</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>p61850</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e60000</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e62100</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e62900</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e62720</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e62730</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e62740</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>p65300</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>p65400</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e68000</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e82200</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>t27800</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>s27860</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>p27800</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>t27860</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>s27860</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e87530</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e87550</p></td>
</tr>
<tr class="row-odd"><td><p>ASCHCI</p></td>
<td><p>e00900</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e03260</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e30400</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e30500</p></td>
</tr>
<tr class="row-odd"><td><p>ASCHCL</p></td>
<td><p>e00900</p></td>
</tr>
<tr class="row-even"><td><p>ACGNS</p></td>
<td><p>e01000</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e01100</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e01200</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>p22250</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e22320</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e22370</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>p23250</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e24515</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e24516</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e24518</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e24535</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e24560</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e24598</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e24615</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e24570</p></td>
</tr>
<tr class="row-odd"><td><p>ASCHEI</p></td>
<td><p>e02000</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>p25350</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>p25470</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>p25700</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e25820</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e25850</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e25860</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e25940</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e25980</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e25920</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e25960</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e26110</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e26170</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e26190</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e26160</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e26180</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e26270</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e26100</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e26390</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e26400</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e27200</p></td>
</tr>
<tr class="row-even"><td><p>ASCHEL</p></td>
<td><p>e02000</p></td>
</tr>
<tr class="row-odd"><td><p>ASCHF</p></td>
<td><p>e02100</p></td>
</tr>
<tr class="row-even"><td><p>AUCOMP</p></td>
<td><p>e02300</p></td>
</tr>
<tr class="row-odd"><td><p>ASOCSEC</p></td>
<td><p>e02400</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e02500</p></td>
</tr>
<tr class="row-odd"><td><p>ACPIM</p></td>
<td><p>e03270</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>e03290</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e17500</p></td>
</tr>
<tr class="row-even"><td><p>ABOOK</p></td>
<td><p>e07300</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>e07400</p></td>
</tr>
<tr class="row-even"><td><p>AIPD</p></td>
<td><p>e19200</p></td>
</tr>
</tbody>
</table>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="appendix-c-stage-ii-targets">
<h1>Appendix C Stage II targets<a class="headerlink" href="#appendix-c-stage-ii-targets" title="Permalink to this headline">#</a></h1>
<ul class="simple">
<li><p>US Population</p></li>
<li><p>Total Returns</p></li>
<li><p>Single Returns</p></li>
<li><p>Joint Returns</p></li>
<li><p>Head of Household Returns</p></li>
<li><p>Number of Returns w/ Gross Security Income Number of Dependent Exemptions</p></li>
<li><p>Taxable Interest Income</p></li>
<li><p>Ordinary Dividends</p></li>
<li><p>Business Income (Schedule C) Business Loss (Schedule C)</p></li>
<li><p>Net Capital Gains in AGI</p></li>
<li><p>Taxable Pensions and Annuities Supplemental Income (Schedule E) Supplemental Loss (Schedule E)</p></li>
<li><p>Gross Social Security Income</p></li>
<li><p>Unemployment Compensation</p></li>
<li><p>Wages and Salaries: Zero or Less</p></li>
<li><p>Wages and Salaries: <span class="math notranslate nohighlight">\(1 Less Than \)</span>10,000</p></li>
<li><p>Wages and Salaries: <span class="math notranslate nohighlight">\(10,000 Less Than \)</span>20,000</p></li>
<li><p>Wages and Salaries: <span class="math notranslate nohighlight">\(20,000 Less Than \)</span>30,000</p></li>
<li><p>Wages and Salaries: <span class="math notranslate nohighlight">\(30,000 Less Than \)</span>40,000</p></li>
<li><p>Wages and Salaries: <span class="math notranslate nohighlight">\(40,000 Less Than \)</span>50,000</p></li>
<li><p>Wages and Salaries: <span class="math notranslate nohighlight">\(50,000 Less Than \)</span>75,000</p></li>
<li><p>Wages and Salaries: <span class="math notranslate nohighlight">\(75,000 Less Than \)</span>100,000</p></li>
<li><p>Wages and Salaries: <span class="math notranslate nohighlight">\(100,000 Less Than \)</span>200,000</p></li>
<li><p>Wages and Salaries: <span class="math notranslate nohighlight">\(200,000 Less Than \)</span>500,000</p></li>
<li><p>Wages and Salaries: <span class="math notranslate nohighlight">\(500,000 Less Than \)</span>1 Million</p></li>
<li><p>Wages and Salaries: $1 Million and Over</p></li>
</ul>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content/methods"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="Stage1_Stage2_Methodology.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Extrapolation Methods</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="puf_stage3.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Stage III Documentation</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Anderson Frailey<br/>
  
      &copy; Copyright 2021.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>